{{ define "main" }}
  <div class="flex flex-wrap w-full p-2">

    <div class="w-full lg:w-3/4">
      <div id="auto-feed" class="grid grid-cols-3 auto-rows-max gap-2 text-white animate__animated animate__fadeIn mb-2">

        {{ $paginator := .Paginate (where site.RegularPages "Section" "work") }}
        {{ range $paginator.Pages }}

          <a href="{{ .Permalink }}" class="tile bg-aqua overflow-hidden cursor-pointer group relative">
            <div class="overlay-text z-20 opacity-0 group-hover:opacity-100 transition-all mix-blend-difference text-center w-full p-2 leading-none">
              {{ .Title }}
            </div>
            {{ if .Params.image }}
              <img src="{{ .Params.image }}" class="object-cover w-full h-full duration-1000 ease-in-out transform group-hover:scale-105" alt="">
            {{ end }}
            {{ if .Params.thumbnailVideo }}
              <video autoplay muted loop class="object-cover w-full h-full duration-1000 ease-in-out transform group-hover:scale-105">
                <source src="{{ .Params.thumbnailVideo }}" type="video/mp4">
              </video>
            {{ end }}
          </a>

        {{ end }}

      </div>

      {{ partial "pagination" . }}
    </div>

    <div class="w-full lg:w-1/4">
      <div id="instafeed-container" class="lg:pl-2 animate__animated animate__fadeIn"></div>
    </div>

  </div>

  <script src="https://cdn.jsdelivr.net/gh/stevenschobert/instafeed.js@2.0.0rc1/src/instafeed.min.js"></script>
  <script type="text/javascript">
    $('#auto-feed').infiniteScroll({
      path: '.pagination-next',
      append: '.tile',
      status: '.scroller-status',
      hideNav: '.pagination',
    });

    var userFeed = new Instafeed({
      get: 'user',
      target: "instafeed-container",
      resolution: 'low_resolution',
      limit: 8,
      accessToken: 'IGQVJWQXhEeGZAZAaFJUMXpJWFJ1NTNjWjRVUS01R0JuY00xMm15cm1TRTZAiWVp0ZAGpwZADYzcEZAtelJrRVFLT294d3YxdFVjcU45UjZACS0EyUzFESmlzWk9BQjNoajNTd0JZAY2ZAZAa2ZAfRUd3T2R6UnRPWgZDZD',
      template: '<a href="{{ "{{link}}" }}" target="_blank" class="flex group relative overflow-hidden mb-2 text-white"><div class="overlay-text w-full p-2 instagram z-20 opacity-0 group-hover:opacity-100 transition-all text-base text-center leading-none mix-blend-difference"><img src="img/insta-mini.svg" class="mx-auto mb-2" alt=""><p class="mix-blend-difference">{{ "{{caption}}" }}</p></div><img class="object-cover w-full h-full duration-1000 ease-in-out transform group-hover:scale-105" src="{{ "{{image}}" }}" class="pb-2"/></a>',
    });
    userFeed.run();
  </script>
{{ end }}
